/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'buildlogic.java-application-conventions'
    // builds uberjar "loghog-all.jar" with task "shadowJar"
    id "com.gradleup.shadow" version "8.3.3"
    id "com.diffplug.spotless" version "6.25.0"
}

spotless {
    groovyGradle {
        greclipse().configFile("$rootDir/greclipse.properties")
    }

    format 'misc', {
        // define the files to apply `misc` to
        target("*.conf", "*.config", "*.csv", "*.dtd", ".gitignore", "*.ent", "*.gradle", "*.groovy", "*.html", "*.ini", "*.js", "*.json", "*.jsp", "*.kts", "*.md", "*.properties", "*.sh", "*.template", "*.txt", "*.xlsx", "*.xml", "*.xsd", "*.yaml", "*.yml")

        // define the steps to apply to those files
        trimTrailingWhitespace()
        indentWithSpaces()
        endWithNewline()
    }

    java {
        // don't need to set target, it is inferred from java

        // apply a specific flavor of google-java-format
        googleJavaFormat('1.24.0').aosp().reflowLongStrings().skipJavadocFormatting()
        // fix formatting of type annotations
        formatAnnotations()
        // make sure every file has the following copyright header.
        // optionally, Spotless can set copyright years by digging
        // through git history (see "license" section below)
        licenseHeader '/* (C)$YEAR */'
    }
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    implementation 'org.apache.commons:commons-text'
    implementation 'com.h2database:h2'
    implementation 'org.jooq:jooq'
}

application {
    // Define the main class for the application.
    mainClass = 'com.contrastsecurity.agent.loghog.Loghog'
}
